# ğŸ“Š XZone News Map Chart - Quantitative Impact Analysis Engine

<div align="center">

**Há»‡ thá»‘ng Ä‘á»‹nh lÆ°á»£ng tÃ¡c Ä‘á»™ng cá»§a tin tá»©c lÃªn giÃ¡ cá»• phiáº¿u Viá»‡t Nam**

[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](https://opensource.org/licenses/MIT)
[![React](https://img.shields.io/badge/React-19.2-61dafb.svg)](https://reactjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.8-3178c6.svg)](https://www.typescriptlang.org/)
[![Gemini](https://img.shields.io/badge/Gemini-2.0-4285f4.svg)](https://ai.google.dev/)

</div>

---

## ğŸ¯ Tá»•ng quan dá»± Ã¡n

XZone News Map Chart lÃ  á»©ng dá»¥ng **event study** chuyÃªn nghiá»‡p, sá»­ dá»¥ng phÆ°Æ¡ng phÃ¡p Ä‘á»‹nh lÆ°á»£ng Ä‘á»ƒ:

1. **Thu tháº­p tin tá»©c** tá»« Google Search/News (real-time)
2. **Map tin tá»©c** vÃ o timeline giÃ¡ cá»• phiáº¿u (OHLCV Daily)
3. **Äo lÆ°á»ng tÃ¡c Ä‘á»™ng** báº±ng cÃ¡c chá»‰ sá»‘ thá»‘ng kÃª (Abnormal Return, Z-score, Volume Shock)
4. **PhÃ¢n loáº¡i má»©c Ä‘á»™** tá»« Negligible â†’ Structural Shock

### Triáº¿t lÃ½ cá»‘t lÃµi
> **Tin tá»©c = Catalyst | GiÃ¡ + Khá»‘i lÆ°á»£ng = PhÃ¡n quyáº¿t**

Há»‡ thá»‘ng **KHÃ”NG dá»± bÃ¡o - KHÃ”NG khuyáº¿n nghá»‹** - chá»‰ phÃ¢n tÃ­ch dá»¯ liá»‡u quÃ¡ khá»© má»™t cÃ¡ch khÃ¡ch quan.

---

## ğŸ—ï¸ Kiáº¿n trÃºc há»‡ thá»‘ng

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    XZone News Map Chart                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚  Gemini 2.0    â”‚â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  News Discovery  â”‚            â”‚
â”‚  â”‚  (Google Search)â”‚        â”‚  + Normalization â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                     â”‚                        â”‚
â”‚                                     â–¼                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚      Impact Analysis Engine (Pure Math)     â”‚             â”‚
â”‚  â”‚  â€¢ Log Return Calculation                   â”‚             â”‚
â”‚  â”‚  â€¢ Z-Score (Price, Volume, Range)           â”‚             â”‚
â”‚  â”‚  â€¢ Event Clustering                         â”‚             â”‚
â”‚  â”‚  â€¢ XIS Score (0-100)                        â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                     â”‚                        â”‚
â”‚                                     â–¼                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚   TradingView Chart + Timeline UI           â”‚             â”‚
â”‚  â”‚   (Lightweight Charts + React)              â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### TÃ¡ch biá»‡t logic (Separation of Concerns)

| Component | Role | Tools |
|-----------|------|-------|
| **Deterministic Engine** | TÃ­nh toÃ¡n metrics, classification | Pure TypeScript |
| **LLM Layer (Optional)** | News search, Market observation | Gemini 2.0 Flash |
| **UI/Chart** | Visualization | Lightweight Charts + React |

---

## ğŸ“ Impact Analysis Methodology

### Cá»­a sá»• sá»± kiá»‡n (Event Windows)

```
Pre-window:       [-10, -1]  â†’ Baseline estimation
Immediate:        [0, +1]     â†’ Instant reaction
Short-term:       [0, +3]     â†’ Momentum confirmation
Medium-term:      [0, +5]     â†’ Trend sustainability
```

### Metrics chÃ­nh

#### 1. **Price Impact (Abnormal Return)**
```
r_t = ln(C_t / C_{t-1})                   // Log return
Î¼_pre = mean(r[-10..-1])                  // Baseline mean
Ïƒ_pre = std(r[-10..-1])                   // Baseline volatility

CAR_k = Î£ (r_i - Î¼_pre)                   // Cumulative Abnormal Return
z_k = CAR_k / (Ïƒ_pre Ã— sqrt(k))           // Z-statistic
```

#### 2. **Volume Shock**
```
z_vol = (V_event - Î¼_vol) / Ïƒ_vol
```

#### 3. **Range Expansion**
```
TR = max(H - L, |H - C_prev|, |L - C_prev|)
z_TR = (TR_event - Î¼_TR) / Ïƒ_TR
```

### XIS Score (0-100)
```
XIS = (Z_max Ã— 65%) + (Vol_ratio Ã— 20%) + (Range_ratio Ã— 15%)
```

**Classification:**
- **0-20**: Negligible
- **20-45**: Absorbed Reaction
- **45-70**: Market Re-pricing
- **70-100**: Structural Shock

### Event Clustering
Khi nhiá»u tin xuáº¥t hiá»‡n trong vÃ²ng Â±3 ngÃ y:
- **Anchor event** giá»¯ nguyÃªn baseline
- **Clustered events** káº¿ thá»«a baseline tá»« anchor
- TrÃ¡nh bias do baseline contamination

---

## ğŸš€ Quick Start (Local Development)

### Prerequisites
- Node.js 18+
- Gemini API Key ([Get here](https://aistudio.google.com/app/apikey))

### Installation

```bash
# Clone repository
git clone <repository-url>
cd xzoneapp

# Install dependencies
npm install

# Setup environment variables
cp .env.example .env
# Edit .env and add your VITE_GEMINI_API_KEY

# Run development server
npm run dev
```

App sáº½ cháº¡y táº¡i: `http://localhost:3000`

---

## ğŸ“‚ Project Structure

```
xzoneapp/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ StockChart.tsx          # TradingView chart with markers
â”‚   â”œâ”€â”€ ImpactReport.tsx        # Event impact detail panel
â”‚   â””â”€â”€ NewsTimeline.tsx        # News event list
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ impactEngine.ts         # Deterministic calculations
â”‚   â”œâ”€â”€ geminiService.ts        # Gemini API integration
â”‚   â””â”€â”€ dataLoader.ts           # CSV/JSON price data parser
â”œâ”€â”€ contextApp/
â”‚   â”œâ”€â”€ Impact_Analysis_Engine_AI_Quant.md    # Spec document
â”‚   â””â”€â”€ News_Map_Chart_Prompt_FULL_GoogleSearch.md
â”œâ”€â”€ App.tsx                     # Main application
â”œâ”€â”€ types.ts                    # TypeScript interfaces
â”œâ”€â”€ data.csv                    # Default price data
â””â”€â”€ package.json
```

---

## ğŸ“Š Data Format

### Price Data (CSV)
```csv
Date,Ticker,Open,High,Low,Close,Volume
2024-01-01,HPG,26000,26500,25800,26200,1800000
```

### Price Data (JSON)
```json
{
  "symbol": "HPG",
  "price": [
    {
      "date": "2024-01-01",
      "open": 26000,
      "high": 26500,
      "low": 25800,
      "close": 26200,
      "volume": 1800000
    }
  ]
}
```

---

## ğŸ¨ Features

### âœ… Core Features
- [x] Real-time news search via Google Search (Gemini)
- [x] Deterministic impact analysis (Z-score based)
- [x] Event clustering (within Â±3 days)
- [x] TradingView-style candlestick chart
- [x] Volume histogram overlay
- [x] Interactive news markers
- [x] Validation flags (liquidity, volatility drift)
- [x] Multi-stock inventory system
- [x] CSV/JSON data upload
- [x] LocalStorage caching

### ğŸ”œ Roadmap
- [ ] Benchmark adjustment (VNINDEX beta)
- [ ] Export to PDF/Excel
- [ ] Backtesting mode
- [ ] API endpoints for external integration

---

## âš™ï¸ Configuration

### Environment Variables
```bash
VITE_GEMINI_API_KEY=<your_api_key>
```

### Model Selection
File: [services/geminiService.ts](services/geminiService.ts:20)
```typescript
model: "gemini-3-flash-preview"  // Latest Gemini 3 Flash
// Alternative: "gemini-3-pro-preview" (more powerful)
// Alternative: "gemini-2.5-flash" (stable)
```

---

## ğŸ§ª Data Validation & Quality Control

Há»‡ thá»‘ng tá»± Ä‘á»™ng phÃ¡t hiá»‡n:
- **Low Liquidity Spike**: GiÃ¡ biáº¿n Ä‘á»™ng máº¡nh trÃªn volume tháº¥p
- **High Baseline Volatility**: Baseline nhiá»…u cao (>60% annualized)
- **Cluster Inheritance**: Sá»± kiá»‡n káº¿ thá»«a baseline tá»« event trÆ°á»›c

Validation flags xuáº¥t hiá»‡n trong Impact Report panel.

---

## ğŸ”’ Giá»›i háº¡n & Disclaimer

### Giá»›i háº¡n ká»¹ thuáº­t
1. **Chá»‰ há»— trá»£ Daily timeframe** (chÆ°a cÃ³ intraday)
2. **KhÃ´ng cÃ³ benchmark adjustment** (sáº½ bá»‹ áº£nh hÆ°á»Ÿng market-wide moves)
3. **Google Search giá»›i háº¡n**: TÃ¹y thuá»™c Gemini API quota
4. **Historical data only**: KhÃ´ng real-time streaming

### Legal Disclaimer
```
á»¨ng dá»¥ng nÃ y chá»‰ phá»¥c vá»¥ má»¥c Ä‘Ã­ch NGHIÃŠN Cá»¨U vÃ  Há»ŒC Táº¬P.
- KHÃ”NG pháº£i cÃ´ng cá»¥ tÆ° váº¥n Ä‘áº§u tÆ°
- KHÃ”NG Ä‘Æ°a khuyáº¿n nghá»‹ mua/bÃ¡n
- NgÆ°á»i dÃ¹ng tá»± chá»‹u trÃ¡ch nhiá»‡m vá» quyáº¿t Ä‘á»‹nh Ä‘áº§u tÆ°
```

---

## ğŸ› ï¸ Tech Stack

| Category | Technology |
|----------|-----------|
| **Frontend** | React 19.2 + TypeScript 5.8 |
| **Charting** | [Lightweight Charts](https://tradingview.github.io/lightweight-charts/) 4.2 |
| **AI/ML** | Google Gemini 2.0 Flash Exp |
| **Build Tool** | Vite 6.2 |
| **Styling** | TailwindCSS (via CDN) |
| **Icons** | Lucide React |

---

## ğŸ¤ Contributing

Contributions are welcome! Areas for improvement:
- Performance optimization (event clustering algorithm)
- Benchmark adjustment implementation
- UI/UX enhancements
- Test coverage

---

## ğŸ“š References

### Spec Documents
- [Impact Analysis Engine Spec](contextApp/Impact_Analysis_Engine_AI_Quant.md)
- [News Map Chart Prompt](contextApp/News_Map_Chart_Prompt_FULL_GoogleSearch.md)

### Academic Foundation
- Event Study Methodology (MacKinlay, 1997)
- Market Microstructure Theory
- Statistical Arbitrage

---

## ğŸ“„ License

MIT License - See [LICENSE](LICENSE) for details

---

## ğŸ†˜ Troubleshooting

### API Key Issues
```bash
# Check if .env file exists
ls -la .env

# Verify variable name
cat .env | grep VITE_GEMINI_API_KEY

# Restart dev server after changing .env
npm run dev
```

### Chart Not Rendering
- Kiá»ƒm tra console cho lá»—i
- Äáº£m báº£o data cÃ³ Ã­t nháº¥t 20 phiÃªn
- Clear localStorage: `localStorage.clear()` in browser console

### News Search Fails
- Kiá»ƒm tra API quota táº¡i [Google AI Studio](https://aistudio.google.com/)
- Thá»­ láº¡i vá»›i khoáº£ng thá»i gian ngáº¯n hÆ¡n (1 thÃ¡ng thay vÃ¬ 2 thÃ¡ng)

---

## ğŸ‘¨â€ğŸ’» Developer Contact

For questions or support:
- Open an issue on GitHub
- Email: [your-email]
- Documentation: See `/contextApp` folder

---

<div align="center">

**Built with â¤ï¸ for the Vietnamese stock market research community**

Made by XZone Quant Team

</div>
